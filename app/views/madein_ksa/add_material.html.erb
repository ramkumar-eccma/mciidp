<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-12">
        <img alt="image" class="img-responsive" src="<%= image_url 'headerlogo.jpg' %> " height="50px" />
        <!--  <div class="col-lg-6">
        <img alt="image" src="<%= image_url 'l3.jpg' %>" style="margin-left:-15px;" />
        </div>
        <div class="col-lg-2">
        <img alt="image" src="<%= image_url 'l2.jpg' %>" style="align:center;"/>
        </div>
        <div class="col-lg-4">
            <img alt="image" src="<%= image_url 'l1.jpg' %>" style="margin-top:15px;margin-left:220px;" />
        </div>  -->
     
        <div class="clearfix"></div>
         <ol class="breadcrumb" style="background:#F3F3F4; padding:10px;">
          <!--  <li>
                <a href="<%= url_for :controller => 'source_data', :action => 'chart' %>">Home</a>
            </li>
            <li>
                <a href="<%= url_for :controller => 'madein_ksa', :action => 'show' %>">MADE IN KSA Searcher</a>
            </li>
             <li class="active">
                <b>MADE IN KSA Details</b>
            </li>-->
            <li>
             <%- if I18n.locale==:ar%>
                 <span class="">
                  <% @ar_breadcrum_home = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '14','ar')%>
                  <% @ar_breadcrum_home.each do |ar_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'source_data', :action => 'chart' %>"><%= ar_breadcrum_home.language_property %></a>

                   <% end %>
                </span>
            <% else %>
                <span class="">
                  <% @en_breadcrum_home = Language.select("language_property").where("language_id= ? AND language_type = ?",'14','en')%>
                  <% @en_breadcrum_home.each do |en_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'source_data', :action => 'chart' %>"><%= en_breadcrum_home.language_property %></a>
            <% end %>
                </span>
            <% end -%>
            </li>
            <li>
             <%- if I18n.locale==:ar%>
                 <span class="">
                  <% @ar_breadcrum_search = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '40','ar')%>
                  <% @ar_breadcrum_search.each do |ar_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'madein_ksa', :action => 'show' %>"><%= ar_breadcrum_home.language_property %></a>

                   <% end %>
                </span>
            <% else %>
                <span class="">
                  <% @ar_breadcrum_search = Language.select("language_property").where("language_id= ? AND language_type = ?",'40','en')%>
                  <% @ar_breadcrum_search.each do |en_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'madein_ksa', :action => 'show' %>"><%= en_breadcrum_home.language_property %></a>
            <% end %>
                </span>
            <% end -%>
          
            </li>
             <li class="active">
                <%- if I18n.locale== :ar %>
                <span class="">
                  <% @ar_breadcrum_view = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '17','ar')%>
                  <% @ar_breadcrum_view.each do |ar_breadcrum_view|%>
                   <%= ar_breadcrum_view.language_property %>

                   <% end %>
                </span>
              <% else %>
                <span class="">
                  <% @en_breadcrum_view = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '17','en')%>
                  <% @en_breadcrum_view.each do |en_breadcrum_view|%>
                 <%= en_breadcrum_view.language_property %>

                   <% end %>
                </span>
              <% end -%>
            </li>
        </ol>
        
    </div>
</div>
<%= form_tag(add_material_ksa_path,:method => "post", class: "navbar-form",:multipart => true) do %>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
     <div class="col-lg-12">
        <div class="ibox" style="border:1px solid #21B6A8;">
          <div class="ibox-title" style="background:#21B6A8;color:#f3f3f4 !important;">
            ADD NEW ITEM
              <div class="ibox-tools hide">
                  <a class="collapse-link" style="color:#f3f3f4 !important;">
                      <i class="fa fa-chevron-up"></i>
                  </a>
                 
                  <a class="close-link" style="color:#f3f3f4 !important;">
                      <i class="fa fa-times"></i>
                  </a>
              </div>
          </div>

          <div class="ibox-content">
           <table class="table table-bordered">
             <tr>
                 <td><b>CMM MATERIAL NO.</b></td>
                 <td>
                  <input type="text" name="cmm" class="form-control" id="cmm" value="<%= @a %>">
                 </td>
             </tr>
             <tr>
               <td>
               <b>  MATERIAL ID</b>
               </td>
               <td>
                 <input type="text" name="material_id" class="form-control" id="material_id">
               </td>
             </tr>
              <tr>
               <td>
                <b>CLASS NAME<font color="#FF0000">*</font></b>
               </td>
               <td>
                 <input type="text" name="txt_class" id="txt_class" value="" class="form-control" >
              <!--  <input type="button" name="class_btn" value="BROWSE" onclick="getclass();" %>-->
                  <a data-toggle="modal" href="#modal-form" >BROWSE</a>
                </td>
             </tr>
              <tr>
               <td>
                <b>DESCRIPTION</b>
               </td>
               <td>
                 <input type="text" name="class" id="class" class="form-control">
               </td>
             </tr>
              <tr>
               <td>
                <b>SUPPLIER NAME</b>
               </td>
               <td>
                 <input type="text" name="txt_supplier" id="txt_supplier" value="" class="form-control">
                 <input type="hidden" name="txt_supplier_id" id="txt_supplier_id" value="" class="form-control">
                <a data-toggle="modal" href="#modal-form1">BROWSE</a>
                <!--   <input type="button" name="supplier_btn" value="BROWSE" onclick="getsupplier();">-->
               </td>
             </tr>
              <tr>
               <td>
                <b>SUPPLIER PART NO.</b>
               </td>
               <td>
                 <input type="text" name="class" id="class" class="form-control">
               </td>
             </tr>
            </table> 
          
           <!--  <td>
              <input type="button" name="catalog" value="Proceed to Catalog this Item" id="catalog" class="btn btn-primary" onclick="get_template();">
             </td>
              <td>
               <input type="button" name="catalog" value="Proceed to Catalog this Item" id="catalog" class="btn btn-primary" onclick="get_template();">
              </td>-->
             
          <input type="button" name="catalog" id="catalog" value="Proceed to Catalog this Item" class="btn btn-primary" onclick="get_template();">
                  <!--      <input type="button" name="catalog" value="Proceed to Catalog this Item" id="catalog" class="btn btn-primary" remote="true">-->

         
          <div id="txthint1"></div>
      </div>
            <!--div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="modal-form">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content" style="border:2px solid #E66D96;">
                      <div class="modal-header" style="background:#E66D96;">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"  style="color:#f3f3f4 !important;"><span aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="gridSystemModalLabel" style="color:#f3f3f4 !important;">Class Names</h4>
                      </div>
                      <div class="modal-body">
                          <div class="row">
                              <div class="col-md-12" style="height:500px;overflow:auto;">
                                <table class="table borderless">
                                    <% @class.each do |x|%>
                                        <tr>
                                          <td><input type="radio" name="class_sel" id="class_sel" class="class_sel" onclick="getclass(this.value);" value="<%= x.Class_Name %>"></td>
                                          <td><%= x.Class_Name %></td>
                                          <td><%= @sql1 %></td>
                                        </tr>  
                                    <% end %>
                                </table>
                              </div>
                          </div>  
                      </div>  
                  </div>
                </div>
              </div--> 
               <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="modal-form">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content" style="border:2px solid #8A6D3B;">
                      <div class="modal-header" style="background:#8A6D3B;">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"  style="color:#f3f3f4 !important;"><span aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="gridSystemModalLabel" style="color:#f3f3f4 !important;">Class Names</h4>
                      </div>
                      <div class="modal-body">
                          <div class="row">
                              <div class="col-md-12">
                                 <table class="table table-striped table-bordered table-hover dataTables-example">
                                    <thead class="hide">
                                    <tr>
                                        <th></th>
                                        <th></th>
                                        <th class="hide"></th>
                                        
                                    </tr>
                                    </thead>
                                    <tbody>
                                     <% @class.each do |x|%>
                                        <tr>
                                          <td><input type="radio" name="class_sel" id="class_sel" class="class_sel" onclick="getclass(this.value);" value="<%= x.Class_Name %>"></td>
                                          <td><%= x.Class_Name %></td>
                                          <td class="hide"><%= @sql1 %></td>
                                        </tr>  
                                    <% end %>
                                      </tbody>

                                    </table>
                              </div>
                          </div>  
                      </div>  
                  </div>
                </div>
              </div>
              <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="modal-form1">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content" style="border:2px solid #2FADC1;">
                      <div class="modal-header" style="background:#2FADC1;">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"  style="color:#f3f3f4 !important;"><span aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="gridSystemModalLabel" style="color:#f3f3f4 !important;">Vendor Names</h4>
                      </div>
                      <div class="modal-body">
                          <div class="row">
                              <div class="col-md-12">
                                <table class="table table-striped table-bordered table-hover dataTables-example">
                                    <thead class="hide">
                                    <tr>
                                        <th></th>
                                        <th></th>
                                        <th class="hide"></th>
                                        
                                    </tr>
                                    </thead>
                                    <tbody>
                                     <% @vendor.each do |v|%>
                                        <tr>
                                          <td><input type="radio" name="supplier_sel" id="supplier_sel" onclick="getsupplier(this.value);" value="<%= v.Factory_Name %> ,<%= v.Factory_ID %>"></td>
                                          <td><%= link_to v.Factory_Name , {:controller => :langs,:action => :view,:Factory_ID => v.Factory_ID},:target => "_blank"  %></td>
                                           <td class="hide"></td>
                                        </tr>  
                                    <% end %>
                                      </tbody>
                                    </table>
                              </div>
                          </div>  
                      </div>  
                  </div>
                </div>
              </div>
              
     </div>
    </div>
   </div>
  </div>
<% end %>
<% content_for :javascript do %>
<script type="text/javascript">
  function getclass(val)
  {
    $('#modal-form').modal('hide');
//  childWindow=window.open('class_ksa','win2','scrollbars=yes,resizable=no,width=700,height=700,left=50,top=0');
   // var classname=document.class_sel.value;
  //  $(document).ready(function(){
  //    $("#txt_class").val(classname);
  //  });
  //  alert("selected")
 var classname=val;
 document.getElementById("txt_class").value = classname;

  //$('#model-form').modal('hide');

  }
  function getsupplier(val1)
  {
    $('#modal-form1').modal('hide');
    //var classname=val1;
    var factory = val1.split(',');
 document.getElementById("txt_supplier_id").value = factory[1];
 document.getElementById("txt_supplier").value = factory[0];
  //childWindow=window.open('supplier_ksa','win2','scrollbars=yes,resizable=no,width=700,height=700,left=50,top=0');
  }
 function get_template()
  {
/*  if(document.getElementById("txt_class").value =="")
    {
    alert("Enter the class name");
    return false;
    }*/

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txthint1").innerHTML=xmlhttp.responseText;
    }
  }

var txt_class=document.getElementById("txt_class").value;
var txt_supplier=document.getElementById("txt_supplier").value;
xmlhttp.open("GET","get_template_ksa?class="+txt_class+"&supplier="+txt_supplier,true);
xmlhttp.setRequestHeader("Content-Type", "application/json");
xmlhttp.send(xmlhttp);
}


$(function() {

    $('.dataTables-example').dataTable({
        // "dom": 'T<"clear">lfrtip',
        // "tableTools": {
        //     "sSwfPath": "../assets/dataTables/swf/copy_csv_xls_pdf.swf"
        // }
    });

    /* Init DataTables */
    var oTable = $('#editable').dataTable();

    /* Apply the jEditable handlers to the table */
    oTable.$('td').editable( '../example_ajax.php', {
        "callback": function( sValue, y ) {
            var aPos = oTable.fnGetPosition( this );
            oTable.fnUpdate( sValue, aPos[0], aPos[1] );
        },
        "submitdata": function ( value, settings ) {
            return {
                "row_id": this.parentNode.getAttribute('id'),
                "column": oTable.fnGetPosition( this )[2]
            };
        },

        "width": "90%",
        "height": "100%"
    } );


});

</script>


<% end %>