<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-12">
        <img alt="image" class="img-responsive" src="<%= image_url 'headerlogo.jpg' %> " height="50px" />
        <!--  <div class="col-lg-6">
        <img alt="image" src="<%= image_url 'l3.jpg' %>" style="margin-left:-15px;" />
        </div>
        <div class="col-lg-2">
        <img alt="image" src="<%= image_url 'l2.jpg' %>" style="align:center;"/>
        </div>
        <div class="col-lg-4">
            <img alt="image" src="<%= image_url 'l1.jpg' %>" style="margin-top:15px;margin-left:220px;" />
        </div>  -->
     
        <div class="clearfix"></div>
         <ol class="breadcrumb" style="background:#F3F3F4; padding:10px;">
          <!--  <li>
                <a href="<%= url_for :controller => 'source_data', :action => 'chart' %>">Home</a>
            </li>
            <li>
                <a href="<%= url_for :controller => 'madein_ksa', :action => 'show' %>">MADE IN KSA Searcher</a>
            </li>
             <li class="active">
                <b>MADE IN KSA Details</b>
            </li>-->
            <li>
             <%- if I18n.locale==:ar%>
                 <span class="">
                  <% @ar_breadcrum_home = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '14','ar')%>
                  <% @ar_breadcrum_home.each do |ar_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'source_data', :action => 'chart' %>"><%= ar_breadcrum_home.language_property %></a>

                   <% end %>
                </span>
            <% else %>
                <span class="">
                  <% @en_breadcrum_home = Language.select("language_property").where("language_id= ? AND language_type = ?",'14','en')%>
                  <% @en_breadcrum_home.each do |en_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'source_data', :action => 'chart' %>"><%= en_breadcrum_home.language_property %></a>
            <% end %>
                </span>
            <% end -%>
            </li>
            <li class="hide">
             <%- if I18n.locale==:ar%>
                 <span class="">
                  <% @ar_breadcrum_search = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '40','ar')%>
                  <% @ar_breadcrum_search.each do |ar_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'madein_ksa', :action => 'show' %>"><%= ar_breadcrum_home.language_property %></a>

                   <% end %>
                </span>
            <% else %>
                <span class="">
                  <% @ar_breadcrum_search = Language.select("language_property").where("language_id= ? AND language_type = ?",'40','en')%>
                  <% @ar_breadcrum_search.each do |en_breadcrum_home|%>
                    <a href="<%= url_for :controller => 'madein_ksa', :action => 'show' %>"><%= en_breadcrum_home.language_property %></a>
            <% end %>
                </span>
            <% end -%>
          
            </li>
             <li class="active">
                <%- if I18n.locale== :ar %>
                <span class="">
                  <% @ar_breadcrum_view = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '46','ar')%>
                  <% @ar_breadcrum_view.each do |ar_breadcrum_view|%>
                   <%= ar_breadcrum_view.language_property %>

                   <% end %>
                </span>
              <% else %>
                <span class="">
                  <% @en_breadcrum_view = Language.select("language_property").where("language_id = ?  AND language_type = ? ", '46','en')%>
                  <% @en_breadcrum_view.each do |en_breadcrum_view|%>
                 <%= en_breadcrum_view.language_property %>

                   <% end %>
                </span>
              <% end -%>
            </li>
        </ol>
        
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
        <div class="col-lg-12">
        <div class="ibox" style="border:1px solid #21B6A8;">
          <div class="ibox-title" style="background:#21B6A8;color:#f3f3f4 !important;">
          <%- if I18n.locale== :ar %>
            قالب البحث
                <% else %>
                  Search Template
                <% end -%>
              <div class="ibox-tools hide">
                  <a class="collapse-link" style="color:#f3f3f4 !important;">
                      <i class="fa fa-chevron-up"></i>
                  </a>
                 
                  <a class="close-link" style="color:#f3f3f4 !important;">
                      <i class="fa fa-times"></i>
                  </a>
              </div>
          </div>
          <div class="ibox-content">
             <div class="col-md-6 col-md-offset-3 hide"> 
                <%= form_tag( template_search_path,:method => "get", class: "navbar-form") do %>
                  <div class="form-group ">
                        <label>Search Class Name:</label>
                   <%= text_field_tag :search, params[:search], class: "span4 form-control" %> &nbsp;&nbsp;
                   <%- if I18n.locale== :ar %>
                      <span class="">
                        <% @ar_button = Language.select("language_property").where("language_id = ? AND controller_name = ? AND page_name = ? AND language_type = ? ", '13','langs','show.html.erb','ar')%>
                        <% @ar_button.each do |ar_button|%>
                        <%= submit_tag ar_button.language_property, :class=>"btn btn btn-primary", :style=>"margin:0;",:name=>nil %>
                         <% end %>
                      </span>
                    <% else %>
                      <span class="">
                        <% @en_button = Language.select("language_property").where("language_id = ? AND controller_name = ? AND page_name = ? AND language_type = ? ", '13','langs','show.html.erb','en')%>
                        <% @en_button.each do |en_button|%>
                         <%= submit_tag en_button.language_property, :class=>"btn btn btn-primary", :style=>"margin:0;",:name=>nil %>
                         <% end %>
                      </span>
                    <% end -%>
                  <% end %>
                </div>
              </div>
                <table class="table table-striped table-bordered table-hover dataTables-example">
                  <thead class="">
                  <tr>
                      <th>Class Name</th>
                      <th>Definition</th>
                      <th>Action</th>
                      
                  </tr>
                  </thead>
                  <tbody>
                    <% @class_names.each do|c|%>
                    <% @ct=c.Class_id%>
                    <% @cn=c.Class_Name%>
                      <tr>
                          <td data-toggle="false"><%= link_to c.Class_Name , {:controller => :source_data,:action => :dictionary_detail, :term => '', :esci => c.Class_id, :def =>'' }, :target => "_blank" %></td>
                          <!--td><img src="<%= image_url 'edit-find.png' %>" alt="" data-target=".bs-example-modal-lg" id="<%= c.Class_Name  %>" onclick='runquery(id)'></td-->
                          <td>
                                <%= c.Class_Definition %>
                              <%# @list_drop =DefinitonDn.where("concept_ID = ? AND language_id=?",@ct,'0161-1#LG-000001#1') %>
                                  <%# @list_drop.each do |list_drop|%>
                                   <%#= list_drop.content %>
                                  <%# end %>
                          </td>
                          <td data-toggle="modal" data-target=".bs-example-modal-lg"><!--input type="text" name="cat_id1" id="<%= c.Class_Name  %>" value='View Template' onclick='runquery(id)' class="borderlesstext"--><span class="fa fa-search-plus text-success" id="<%= c.Class_Name  %>" onclick='runquery(id)' style="font-size: 16px;cursor: pointer;"></span></td>
                      </tr>
                    <% end %>
                    </tbody>

                  </table>
          </div>
      </div>
     </div> 
  </div>
</div>
<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg">
      <div class="modal-content" style="border:2px solid #337AB7;">
          <div class="modal-header" style="background:#337AB7;">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"  style="color:#f3f3f4 !important;"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="gridSystemModalLabel" style="color:#f3f3f4 !important;">Template View </h4>
          </div>
          <div class="modal-body">
              <div class="row">
                  <div class="col-md-12" style="height:500px;overflow:auto; ">
                      <div id="preview"></div>
                  </div>
              </div>  
          </div>  
      </div>
    </div>
</div>
<% content_for :javascript do %>

<script type="text/javascript">

// function json_func(){ 
//       var xmlhttp = new XMLHttpRequest();
//       var material_id=document.getElementById("material_id").value;
//       var ref_id=document.getElementById("ref_id").value;
//       var org_name=document.getElementById("org_name").value;
//       var ref_value = org_name + ":" + ref_id
     
//       var apicheck=document.getElementById("test").value;
//       var url = "http://eccma.org/eTSR/etsr_srv.php?id="+common+"&apicheck="+apicheck;
      

//       xmlhttp.onreadystatechange=function() {
//           if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
//               myFunction(xmlhttp.responseText);
//           }
//       }
//       xmlhttp.open("GET", url, true);
//       xmlhttp.send();
//       function myFunction(response) {
//           var arr = JSON.parse(response);
//         var i;
//         // var coun;
//         // var pg;
//         if(arr.result=='0')
//         {
//           var out = "<h3>Details</h3><table class='gridtable'>";
//             out +="<tr><th>CMM Material No.</th><th >Date Updated</th><th >Image</th><th >Xml</th></tr>";
//             out += "<tr><td>"+ arr['property']['0'] +"</td></tr>";
//             out += "</table>";   
            
//             }

            
//         }
//         else{
//           var out =arr.message;
//         }       
//           document.getElementById("preview").innerHTML = out;
//        //    var len = 0;
//         // for(var i in arr['data']['reference']) len++;
//         // alert(len);
//       }
//     }




function runquery(cval)
{
  //openModal();
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
     // json_func();
      //closeModal();
    document.getElementById("preview").innerHTML=xmlhttp.responseText;
    }
  }
 // qid=document.getElementById("cat_id1").value
xmlhttp.open("GET","ajax_property?query="+cval,true);
xmlhttp.send();

}


$(function() {

    $('.dataTables-example').dataTable({
       
    });

    /* Init DataTables */
    var oTable = $('#editable').dataTable();

    /* Apply the jEditable handlers to the table */
    oTable.$('td').editable( '../example_ajax.php', {
        "callback": function( sValue, y ) {
            var aPos = oTable.fnGetPosition( this );
            oTable.fnUpdate( sValue, aPos[0], aPos[1] );
        },
        "submitdata": function ( value, settings ) {
            return {
                "row_id": this.parentNode.getAttribute('id'),
                "column": oTable.fnGetPosition( this )[2]
            };
        },

        "width": "90%",
        "height": "100%"
    } );


});
// function sum_fn() {
//         /* Assuming you have jQuery */
//         $.post('/ajax/sum.json', {
//              num1: 100,
//              num2: 50
//         }, function(data) {
//              var output = data.result;
//              /* output should be 150 if successful */
//         });
//     }

</script>

<% end %>
